# Development Phases ‚Äî Design Document

**–î–∞—Ç–∞:** 2026-02-13
**–°—Ç–∞—Ç—É—Å:** –£—Ç–≤–µ—Ä–∂–¥—ë–Ω
**–¶–µ–ª—å:** –°–∏—Å—Ç–µ–º–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ–∞–π–ª–æ–≤ –ø–æ —Ñ–∞–∑–∞–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Ç–µ—Å—Ç–æ–≤, –∫–æ–¥–∞ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

---

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å Claude —Ç—Ä–∏ —Å–æ—Å—Ç–∞–≤–ª—è—é—â–∏–µ (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Üí —Ç–µ—Å—Ç—ã ‚Üí –∫–æ–¥) –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ–Ω—è—Ç—å—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ. –ë–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Claude –º–æ–∂–µ—Ç:
- –ü–æ–¥–∫—Ä—É—á–∏–≤–∞—Ç—å —Ç–µ—Å—Ç—ã, —á—Ç–æ–±—ã –∫–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏–ª
- –ú–µ–Ω—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –∞ –Ω–µ –Ω–∞–æ–±–æ—Ä–æ—Ç
- –ò–∑–º–µ–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –±–µ–∑ —è–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è

–ù—É–∂–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª—ã –≤–Ω–µ —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑—ã –∏ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ cross-phase –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## –†–µ—à–µ–Ω–∏–µ: –ü–æ–¥—Ö–æ–¥ A ‚Äî –°–∫—Ä–∏–ø—Ç + CLAUDE.md –ø—Ä–∞–≤–∏–ª–∞

### –î–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞:
1. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è:** `phase.sh` –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç deny-—Å–ø–∏—Å–∫–∏ –≤ `.claude/settings.local.json` ‚Äî Claude —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø–∏—Å–∞—Ç—å –≤ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–∞–π–ª
2. **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–æ–Ω–Ω–∞—è:** —Å–µ–∫—Ü–∏—è –≤ CLAUDE.md –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª STOP-–æ—Ç—á—ë—Ç–∞ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ cross-phase –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ü–æ—á–µ–º—É –Ω–µ pre-commit hook (–ü–æ–¥—Ö–æ–¥ B):
Deny-—Å–ø–∏—Å–∫–∏ —É–∂–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–ø–∏—Å—å. –¢—Ä–µ—Ç–∏–π —É—Ä–æ–≤–µ–Ω—å –∑–∞—â–∏—Ç—ã –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç—Ä–µ–Ω–∏–µ –±–µ–∑ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –≤—ã–≥–æ–¥—ã.

---

## –§–∞–∑—ã –∏ –º–∞–ø–ø–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤

### phase:docs ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

**–ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- `Docs/**`
- `README.md`
- `TestResults/QualityDashboard/gate_inventory.json`

### phase:tests ‚Äî –¢–µ—Å—Ç–æ–≤–∞—è –º–æ–¥–µ–ª—å

**–ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- `CardSampleGameTests/**`
- `Packages/TwilightEngine/Tests/**`
- `Packages/EchoEngine/Tests/**`
- `Packages/EchoScenes/Tests/**`
- `Packages/PackEditorKit/Tests/**`
- `Packages/PackEditorApp/Tests/**`
- `TestResults/QualityDashboard/gate_inventory.json` (shared —Å docs)
- `CardSampleGame.xcodeproj/project.pbxproj` (–¥–ª—è –Ω–æ–≤—ã—Ö test targets)

### phase:code ‚Äî –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- `App/**`, `Views/**`, `ViewModels/**`, `Models/**`, `Managers/**`, `Utilities/**`
- `Packages/TwilightEngine/Sources/**`
- `Packages/EchoEngine/Sources/**`, `Packages/EchoScenes/Sources/**`
- `Packages/PackEditorKit/Sources/**`, `Packages/PackEditorApp/Sources/**`
- `DevTools/**`
- `CardSampleGame.xcodeproj/project.pbxproj`
- `.github/ci/**`

### phase:content ‚Äî –ö–æ–Ω—Ç–µ–Ω—Ç –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

**–ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- `Packages/StoryPacks/**`
- `Packages/CharacterPacks/**`
- `**/Resources/**`
- `en.lproj/**`, `ru.lproj/**`
- `Assets.xcassets/**`

### phase:contract ‚Äî –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª —Ä–∞–±–æ—Ç—ã (—Ä–µ–¥–∫–∞—è)

**–ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- `CLAUDE.md`
- `.claude/**`

### –û–±—â–µ–µ –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–∑

**–ú–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å:** –≤—Å—ë (–¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
**–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å:** —Ç–µ—Å—Ç—ã, —Å–∫—Ä–∏–ø—Ç—ã, git-–∫–æ–º–∞–Ω–¥—ã

---

## –ú–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è

### –°–∫—Ä–∏–ø—Ç `phase.sh`

```bash
./phase.sh docs      # —Ñ–∞–∑–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
./phase.sh tests     # —Ç–µ—Å—Ç–æ–≤–∞—è –º–æ–¥–µ–ª—å
./phase.sh code      # —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
./phase.sh content   # –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
./phase.sh contract  # –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
./phase.sh status    # –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é —Ñ–∞–∑—É
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç:
1. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏–º—è —Ñ–∞–∑—ã (–æ—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π)
2. –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç `.claude/phase.json`
3. –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç deny-—Å–ø–∏—Å–∫–∏ –≤ `.claude/settings.local.json` (—Å–æ—Ö—Ä–∞–Ω—è—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ allow)
4. –í—ã–≤–æ–¥–∏—Ç —Å–≤–æ–¥–∫—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª

### `.claude/phase.json` ‚Äî —Ñ–æ—Ä–º–∞—Ç:
```json
{
  "current": "code",
  "since": "2026-02-13T16:40:00Z",
  "by": "user",
  "allowed_summary": ["App/**", "Views/**", "ViewModels/**", "Models/**",
                       "Managers/**", "Utilities/**", "Packages/*/Sources/**",
                       "DevTools/**", ".github/ci/**", "project.pbxproj"]
}
```

### `.claude/settings.local.json` ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:

–°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç deny-—Å–ø–∏—Å–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑—ã. `settings.local.json` –∏–º–µ–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —á–µ–º `settings.json` ‚Äî deny –≤ local –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç allow –≤ project.

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ allow-–ø—Ä–∞–≤–∏–ª–∞ (Bash, WebSearch –∏ —Ç.–¥.) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.

---

## –ü—Ä–æ—Ç–æ–∫–æ–ª STOP-–æ—Ç—á—ë—Ç–∞

–ö–æ–≥–¥–∞ Claude –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª –≤–Ω–µ —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑—ã:

### 1. STOP ‚Äî –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç:

```
‚ö†Ô∏è –¢–†–ï–ë–£–ï–¢–°–Ø –ò–ó–ú–ï–ù–ï–ù–ò–ï –í–ù–ï –¢–ï–ö–£–©–ï–ô –§–ê–ó–´

–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞: phase:code
–§–∞–π–ª: CardSampleGameTests/GateTests/AuditGateTests.swift
–ü—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Ñ–∞–∑–µ: phase:tests

–ß–¢–û: –¢–µ—Å—Ç testArchitectureBoundary –æ–∂–∏–¥–∞–µ—Ç 5 –º–æ–¥—É–ª–µ–π, –Ω–æ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç–∞–ª–æ 6
–ó–ê–ß–ï–ú: –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ CI –±—É–¥–µ—Ç –∫—Ä–∞—Å–Ω—ã–º
–û–ë–û–°–ù–û–í–ê–ù–ò–ï: Docs/Technical/ENGINE_ARCHITECTURE.md ¬ß2.3 ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω EchoScenes
–í–õ–ò–Ø–ù–ò–ï: –û–¥–∏–Ω assert –≤ –æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ, –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –¥—Ä—É–≥–∏–µ —Ç–µ—Å—Ç—ã
–†–ò–°–ö–ò: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
–ö–ê–ß–ï–°–¢–í–û: –ù–µ —Å–Ω–∏–∂–∞–µ—Ç—Å—è ‚Äî —Ç–µ—Å—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ—Ç –∂–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç

–ñ–¥—É —Ä–µ—à–µ–Ω–∏—è:
1. –û–¥–æ–±—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ
2. –û—Ç–ª–æ–∂–∏—Ç—å ‚Äî –ø—Ä–æ–¥–æ–ª–∂—É —Ä–∞–±–æ—Ç—É –±–µ–∑ —ç—Ç–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ñ–∞–∑—É –¥–ª—è batch-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
```

### 3. –ñ–¥–∞—Ç—å —è–≤–Ω–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è
- –¢–æ–ª—å–∫–æ `"–æ–¥–æ–±—Ä—è—é –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ [—Ñ–∞–π–ª]"` —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
- –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –æ–¥–æ–±—Ä–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ, –Ω–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å scope

---

## –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Å—Å–∏–∏

Claude –ø—Ä–∏ –Ω–∞—á–∞–ª–µ —Å–µ—Å—Å–∏–∏ —á–∏—Ç–∞–µ—Ç `.claude/phase.json` –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

```
üìã –¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞: code
‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ: App/**, Sources/**, DevTools/**, .github/ci/**
üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: Docs/**, Tests/**, CLAUDE.md
–ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –ß—Ç–æ –¥–µ–ª–∞–µ–º?
```

---

## –ß—Ç–æ –ù–ï –≤—Ö–æ–¥–∏—Ç –≤ scope

- –ù–µ—Ç pre-commit hook ‚Äî deny-—Å–ø–∏—Å–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è ‚Äî —Ç–æ–ª—å–∫–æ —Ä—É–∫–∞–º–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
- –ù–µ—Ç –ø–æ–¥—Ñ–∞–∑ –¥–ª—è code ‚Äî –≥—Ä–∞–Ω–∏—Ü—ã —Å–ª–æ—ë–≤ –∑–∞—â–∏—â–µ–Ω—ã gate-—Ç–µ—Å—Ç–∞–º–∏
- Claude –Ω–µ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å phase.json –∏–ª–∏ settings.local.json (–æ–Ω–∏ –≤ phase:contract)

---

## –§–∞–π–ª—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| `phase.sh` | –°–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ñ–∞–∑ |
| `.claude/phase.json` | –¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞ (—á–∏—Ç–∞–µ—Ç—Å—è Claude) |
| `.claude/settings.local.json` | Deny-—Å–ø–∏—Å–∫–∏ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º) |
| `CLAUDE.md` ¬ß11 | –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ø–æ —Ñ–∞–∑–∞–º |
